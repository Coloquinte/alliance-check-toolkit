README_timing.rst
=================

Update October 24, 2022
------------------------

coriolis-2.x/src/alliance-check-toolkit/benchs/inverter/cmos/README_timing.rst

Goal
--------
This directory contains the files to analyze the timing response of:
  * a single inverter, (sizes of HiTas tutorial) 
  * a chain of 5 inverters, (sizes of HiTas tutorial) 

using either:

  * static timing analysis (STA), or
  * transistor level simulation, for comparison and estimation of STA accuracy.

using Free Open Source Software:

  * HiTas for STA, and
  * ngspice for transistor level simulation.

Transitor model is BSIM4, adapted from (HiTas tutorial) spice3f5 Berkeley team in:
/technology/bsim4_dummy.ng

Environment configuration for hitas
--------------------------------------
Launch:
  bash
  source ./hitas/avt_env.sh

Invertor timing analysis
-------------------------

A. With STA
++++++++++++
Running:

1. Building the timing database
   ./hitas/db_ng.tcl

NB. here, Hitas uses inv.spi description of the netlist 
to detect VDD and VSS
(see inv.rep)

2. Report critical paths
   ./hitas/report_inv_ng.tcl

provides the inv.paths file that shows the 2 paths of the invertor.

+-------+--------+--------------+-----------------------+
| input | output | input slope  |  propagation delay
+=======+========+==============+=======================+
| F     | R      | 20           |  51
+-------+--------+--------------+-----------------------+
| R     | F      | 20           |  40 
+-------+--------+--------------+-----------------------+

where F: falling, R: rising, timing results in ps.

B. With transistor level simulator ngspice
++++++++++++++++++++++++++++++++++++++++++

ngpsice top_inv.spi
displays timing plots with information of input slope and propagation delay :

+-------+--------+--------------+-----------------------+
| input | output | input slope  |  propagation delay
+=======+========+==============+=======================+
| F     | R      | 20           |  36 
+-------+--------+--------------+-----------------------+
| R     | F      | 20           |  30 
+-------+--------+--------------+-----------------------+

where F: falling, R: rising, timing results in ps.
showing that STA delays are greater than simulation delays,  
keepng the relative order,
with an error for STA of : 30% in the worse case.

Invertor chain timing analysis
------------------------------

A. With STA
++++++++++++
Running:

1. Building the timing database
   ./hitas/db_chain_ng.tcl

NB. here, Hitas uses inv_chain.spi description of the netlist 
to detect VDD and VSS
(see inv_chain.rep)

2. Report critical paths
   ./hitas/report_chain_ng.tcl

provides the inv_chain.paths file that shows the 2 paths of the invertor chain.

+-------+--------+--------------+-----------------------+
| input | output | input slope  |  propagation delay
+=======+========+==============+=======================+
| F     | R      | 20           |  439 
+-------+--------+--------------+-----------------------+
| R     | F      | 20           |  397
+-------+--------+--------------+-----------------------+

where F: falling, R: rising, timing results in ps.

3. Other analysis with the Hitas GUI: Xtas
   xtas
   file/open inv_chain.dtx
   Tools/Get Paths
   Select path/path Detail

B. With transistor level simulator ngspice
++++++++++++++++++++++++++++++++++++++++++

ngpsice top_inv_chain.spi
displays timing plots with information of input slope and propagation delay :

+-------+--------+--------------+-----------------------+
| input | output | input slope  |  propagation delay
+=======+========+==============+=======================+
| F     | R      | 20           |  395
+-------+--------+--------------+-----------------------+
| R     | F      | 20           |  377
+-------+--------+--------------+-----------------------+

showing that STA delays are greater than simulation delays, 
keepng the relative order, 
with an error for STA of : 10% in the worse case.

Clean
-----

./hitas/clean removes the timing files, except .paths files
./ngspice/clean_ngspice removes the files generated by the simulation
