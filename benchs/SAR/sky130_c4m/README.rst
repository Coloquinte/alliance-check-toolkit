README.rst
============

Update 25  October 2022, MM Louerat

directory
---------
/users/cao/mariem/coriolis-2.x/src/alliance-check-toolkit/benchs/SAR/sky130_c4m

goal
----------
SARlogic synthesis, P&R, transistor simulation and sta

target process : sky130_c4m
Cells : C4M-FleCell library

tools
-----
yosys for synthesis
C4M-FlexCell standard Cells
coriolis for place and route
ngspice for transistor simulation
hitas for static timing analysis

cleanup
---------
make clean removes the design files (netlist, layout)
./hitas/clean_sta removes the files generated by static timing analysis
./ngspice/clean_ngspice removes the files generated by simulation with ngspice

synthesis
----------
make vst

provides:
-rw-r--r-- 1 mariem utmp   530 25 oct.  10:52 SARlogic.tcl
-rw-r--r-- 1 mariem utmp 16579 25 oct.  10:52 SARlogic.blif
-rw-r--r-- 1 mariem utmp 48354 25 oct.  10:52 sarlogic.vst
-rw-r--r-- 1 mariem utmp 14874 25 oct.  10:52 SARlogic.spi


place and route
-------------------
make cgt

Tools/PythonScript
doDesign
executon step by step

provides
-rw-r--r-- 1 mariem utmp  74608 25 oct.  10:53 sarlogic_r.vst
-rw-r--r-- 1 mariem utmp  21618 25 oct.  10:53 sarlogic_r.spi
-rw-r--r-- 1 mariem utmp 534552 25 oct.  10:53 sarlogic_r.gds

simulation at transistor level
-------------------------------
ngspice is the signoff simulator


launching ngspice on transistor netlist before placement
********************************************************
ngspice top_ngspice.cir

top_ngspice.cir contains the description of the hierarchical netlist BEFORE routing, using:
SARlogic_netlis.spi, the top level netlist 

NB. In the SARlogic.spi, the netlist generated, the paths have to be changed to access to the standrd cells


top_ngspice.cir is the simulation netlist including SARlogic_netlis.spi, 
with BSIM4 transistor models and 
all the cells (.INCLUDE refering to the standard cell library with appropriate path). 

provides timing plots
Results have to be checked


static timing analysis
-------------------------
hitas is used
to set the environment
bash
source ./hitas/avt_env.sh

sta on netlist BEFORE placement and routing
*********************************************
launching hitas on the netlist BEFORE placement and routing

the netlist is prepared in
top_hitas_ngspice.cir
where the netlist is described including the leaf cells (with .INCLUDE)
BUT the transistor model is included in db.tcl
since the model library as provided for ngspice inside the netlist cannot be read by hitas as is.

./hitas/db.tcl

the files are provided:
-rw-r--r-- 1 mariem utmp     1447  8 oct.  14:24 SARlogic.stat
-rw-r--r-- 1 mariem utmp    90674  8 oct.  14:24 SARlogic.rep
-rw-r--r-- 1 mariem utmp  5583593  8 oct.  14:24 SARlogic.cnv
-rw-r--r-- 1 mariem utmp  1781986  8 oct.  14:24 SARlogic.cns
-rw-r--r-- 1 mariem utmp   168880  8 oct.  14:24 SARlogic.rcx
-rw-r--r-- 1 mariem utmp 37618755  8 oct.  14:24 SARlogic.loop
-rw-r--r-- 1 mariem utmp  1074296  8 oct.  14:24 SARlogic.dtx
-rw-r--r-- 1 mariem utmp  3136791  8 oct.  14:24 SARlogic.stm

xtas provides a GUI to analyse timing paths
File/open data base
Tools/GetPaths
Results have to be checked

./hitas/report.tcl

provides the timing analysis in :
-rw-r--r-- 1 mariem utmp 492403 25 oct.  17:32 SARlogic.setuphold
-rw-r--r-- 1 mariem utmp  13831 25 oct.  17:32 SARlogic.accessmax
-rw-r--r-- 1 mariem utmp  13177 25 oct.  17:32 SARlogic.accessmin
-rw-r--r-- 1 mariem utmp   2664 25 oct.  17:32 SARlogic.comb
-rw-r--r-- 1 mariem utmp   9160 25 oct.  17:32 SARlogic.paths

